---
title: eslint-plugin-turbo
description: 帮助查找代码中未包含在 Turborepo 哈希中的环境变量的 ESLint 插件
---

[`eslint-plugin-turbo` 包](https://www.npmjs.com/package/eslint-plugin-turbo) 帮助您查找代码中使用的但不属于 Turborepo 哈希的环境变量。在源代码中使用但未在 `turbo.json` 中说明的环境变量将在编辑器中高亮显示，错误将显示为 ESLint 输出。

## 安装

将 `eslint-plugin-turbo` 安装到您的 ESLint 配置所在的位置：

::code-group

```bash [pnpm]
pnpm add eslint-plugin-turbo --filter=@repo/eslint-config
```

```bash [yarn]
yarn workspace @acme/eslint-config add eslint-plugin-turbo --dev
```

```bash [npm]
npm i --save-dev eslint-plugin-turbo -w @acme/eslint-config
```

```bash [bun]
bun install --dev eslint-plugin-turbo --filter=@acme/eslint-config
```

::

## 使用方法（Flat Config `eslint.config.js`）

ESLint v9 使用如下所示的 Flat Config 格式：

```js title="./packages/eslint-config/base.js"
import turbo from 'eslint-plugin-turbo';

export default [turbo.configs['flat/recommended']];
```

否则，您可以在 rules 部分配置您想要使用的规则。

```js title="./packages/eslint-config/base.js"
import turbo from 'eslint-plugin-turbo';

export default [
  {
    plugins: {
      turbo,
    },
    rules: {
      'turbo/no-undeclared-env-vars': 'error',
    },
  },
];
```

## 示例（Flat Config `eslint.config.js`）

```js title="./packages/eslint-config/base.js"
import turbo from 'eslint-plugin-turbo';

export default [
  {
    plugins: {
      turbo,
    },
    rules: {
      'turbo/no-undeclared-env-vars': [
        'error',
        {
          allowList: ['^ENV_[A-Z]+$'],
        },
      ],
    },
  },
];
```

## 使用方法（传统 `eslintrc*`）

将 `turbo` 添加到您的 eslint 配置文件的 plugins 部分。您可以省略 `eslint-plugin-` 前缀：

```json title="./packages/eslint-config/base.json"
{
  "plugins": ["turbo"]
}
```

然后在 rules 部分配置您想要使用的规则。

```json title="./packages/eslint-config/base.json"
{
  "rules": {
    "turbo/no-undeclared-env-vars": "error"
  }
}
```

## 示例（传统 `eslintrc*`）

```json title="./packages/eslint-config/base.json"
{
  "plugins": ["turbo"],
  "rules": {
    "turbo/no-undeclared-env-vars": [
      "error",
      {
        "allowList": ["^ENV_[A-Z]+$"]
      }
    ]
  }
}
```

## 规则

### `turbo/no-undeclared-env-vars`

当您在代码中使用未在 `turbo.json` 中声明的环境变量时，此规则将发出警告。

```json title="./packages/eslint-config/base.json"
{
  "rules": {
    "turbo/no-undeclared-env-vars": "error"
  }
}
```

#### 选项

您可以配置规则以忽略某些环境变量：

```json title="./packages/eslint-config/base.json"
{
  "rules": {
    "turbo/no-undeclared-env-vars": [
      "error",
      {
        "allowList": ["^ENV_VAR_PREFIX_.*"]
      }
    ]
  }
}
```

`allowList` 选项接受一个字符串形式的正则表达式数组。
